---
title: "ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚¢ãƒ—ãƒª Espanso ã‚’ä½¿ãŠã†ï¼"
date: "2024-10-31"
subtitle: "ç„¡æ–™ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚¢ãƒ—ãƒª"
previewImage: https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/1beaf074-0f49-9d46-a9c1-df9602a1d95a.png
tags: [Snippets]
---


## [Espanso](https://espanso.org/)
- Espanso ã¨ã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‹ã¤ç„¡æ–™ã§ä½¿ç”¨ã§ãã‚‹ã€ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆWindowsã€macOSã€Linuxï¼‰ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚¢ãƒ—ãƒªã€‚
- çŸ­ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¬æ™‚ã«å…¥åŠ›ã§ãã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ç¹°ã‚Šè¿”ã—å…¥åŠ›ã™ã‚‹å¿…è¦ã®ã‚ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’ç°¡å˜ã«å…¥åŠ›ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
- Mac æ¨™æº–ã®ãƒ†ã‚­ã‚¹ãƒˆè¾æ›¸ã‚ˆã‚Šã‚‚é«˜é€Ÿã§ã€å¤šæ©Ÿèƒ½ã€‚
- ã•ã‚‰ã«ã€Shell script ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ãŸã ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚¢ãƒ—ãƒªã¨ã—ã¦ã ã‘ã§ãªãã€ã‚¢ãƒ—ãƒªã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã‚Šã€APIã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ãªã©ã€éå¸¸ã«æ‹¡å¼µæ€§ãŒé«˜ã„ã€‚
    - ä¾‹ãˆã°ã€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ LLM ã® API ã§å³æ™‚ç¿»è¨³ã•ã›ã‚‹ã“ã¨ãŒã§ãã€ä½œæ¥­ä¸­ã®ã‚¢ãƒ—ãƒªã‹ã‚‰é›¢ã‚Œã‚‹å¿…è¦ã‚‚ãªããªã‚‹ã€‚

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/1beaf074-0f49-9d46-a9c1-df9602a1d95a.png)

![ezgif-1-5219cff875.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/c93e4c1d-18ef-9f17-0db9-9f4e5eff6e08.gif)

![ezgif-1-6d58091dfc.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/833f40ee-47d5-74e9-5bfd-df46d212664e.gif)


## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
:::linkcard
https://espanso.org/docs/install/mac/
:::


ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€ã‚¢ãƒ—ãƒªã‚’é–‹ãã¾ã™ã€‚ãã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€ã‚³ãƒãƒ³ãƒ‰ã§ `espanso status` ã‚’å®Ÿè¡Œã—ã¦å‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚

## è¨­å®š
:::linkcard
https://espanso.org/docs/get-started/
:::

Espanso ã®è¨­å®šã¯ä¸»ã«2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§è¡Œã„ã¾ã™ã€‚

```sh
espanso/
â”œâ”€â”€ config/
â”‚Â Â  â””â”€â”€ default.yml
â””â”€â”€ match/
 Â Â  â””â”€â”€ base.yml
```

`espanso` ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å ´æ‰€ã¯ OS ã«ã‚ˆã£ã¦ç•°ãªã‚Šã€ã‚³ãƒãƒ³ãƒ‰ `espanso path` ã«ã‚ˆã£ã¦ç¢ºã‹ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

- Linux: `$XDG_CONFIG_HOME/espanso` (e.g. `/home/user/.config/espanso`)
- MacOS: `$HOME/Library/Application Support/espanso` (e.g. `/Users/user/Library/Application Support/espanso`)
- Windows: `{FOLDERID_RoamingAppData}\espanso` (e.g. `C:\Users\user\AppData\Roaming\espanso`)


`config/default.yml` ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€åˆã‚ã¯ç‰¹ã«è¨­å®šã™ã‚‹ã“ã¨ã¯ãªã„ã§ã™ã€‚
ã‚‚ã—ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’éè¡¨ç¤ºã«ãŸã„å ´åˆã¯ã€`show_icon: false` ã¨æ›¸ãè¾¼ã‚€ã¨è‰¯ã„ã§ã™ã€‚


## ä½¿ã„æ–¹
ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®è¨­å®šã¯ `match/base.yml` ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚

åŸºæœ¬çš„ã«ã¯æ¬¡ã®ã‚ˆã†ãªæ–‡æ³•ã§æ›¸ãã¾ã™ã€‚
```yml
matches: 
  - trigger: ";hello"
    replace: "world"

# è¤‡æ•°è¡Œ
  - trigger: ";hello"
    replace: "line1\nline2"

# è¤‡æ•°è¡Œ
  - trigger: ";include newlines"
    replace: |
              exactly as you see
              will appear these three
              lines of poetry

# æ”¹è¡Œãªã—
  - trigger: ";fold newlines"
    replace: >
              this is really a
              single line of text
              despite appearances
```

`match/base.yml` ã‚’å¤‰æ›´ã—ãŸã‚‰ã€ãã‚Œã‚’åæ˜ ã•ã›ã‚‹ãŸã‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã§ `Reload` ã‚’ã™ã‚‹ã‹ã€ã‚³ãƒãƒ³ãƒ‰ã§ `espanso restart` ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚

:::warning
æœ›ã¾ãªã„ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ä½œå‹•ã‚’é˜²ããŸã‚ã«ã€`:` ã‚„ `;` ãªã©ã®æ™®æ®µã¯ä½¿ã‚ãªã„è¨˜å·ã‚’æ¥é ­è¾ã«ç”¨ã„ã‚‹ã¨è‰¯ã„ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ `;` ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚
:::

:::warning
`;a` ã‚’ç™»éŒ²ã™ã‚‹ã¨ `;as` ã‚„ `;ad` ã¨ã„ã£ãŸãƒˆãƒªã‚¬ãƒ¼ã¯ä½¿ãˆãªããªã‚Šã¾ã™ã€‚ãªãœãªã‚‰ã€`;a` ã‚’å…¥åŠ›ã—ãŸæ®µéšã§åˆ¥ã®ãƒ†ã‚­ã‚¹ãƒˆã«ç½®æ›ã•ã‚Œã‚‹ã‹ã‚‰ã§ã™ã€‚ã“ã®ã‚ˆã†ãªã“ã¨ã‚’é˜²ããŸã‚ã«ã€çŸ­ã™ãã‚‹ãƒˆãƒªã‚¬ãƒ¼ã®è¨­å®šã¯é¿ã‘ãŸæ–¹ãŒè‰¯ã„ã§ã™ã€‚
:::

:::tip
`match` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹å…¨ã¦ã® `.yml` ãƒ•ã‚¡ã‚¤ãƒ«ã¯èª­ã¿è¾¼ã¾ã‚Œã‚‹ã®ã§ã€ç”¨é€”ã«å¿œã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç´°ã‹ãåˆ†å‰²ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
:::


## å‹•çš„ãƒãƒƒãƒ
æ¬¡ã®è¨­å®šã§ã¯ã€`;now` ã¨å…¥åŠ›ã™ã‚‹ã¨ `It's 11:29` ã®ã‚ˆã†ã«ç¾åœ¨æ™‚åˆ»ã«å¤‰æ›ã—ã¾ã™ã€‚

```yml
  - trigger: ";now"
    replace: It's {{mytime}}
    vars:
      - name: mytime
        type: date
        params:
          format: "%H:%M"
```

## å˜èªãƒãƒƒãƒ
åŸºæœ¬çš„ãª `trigger` ã¨ `match` ã®è¨­å®šæ–¹æ³•ã§ã¯ã€å¤‰æ›ã—ã¦æ¬²ã—ããªã„å ´é¢ã§å¤‰æ›ãŒèµ·ã“ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒˆãƒªã‚¬ãƒ¼ `ther` ã«ã‚ˆã£ã¦ `there` ã¨ã—ãŸã„ã¨ãã€`other` ã¨å…¥åŠ›ã—ã¦ã‚‚å¤‰æ›ãŒå®Ÿè¡Œã•ã‚Œ `othere` ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã‚Œã‚’é˜²ããŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `word: true` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¾ã™ã€‚

```yml
  - trigger: "ther"
    replace: there
    word: true
```

## ã‚«ãƒ¼ã‚½ãƒ«ãƒ’ãƒ³ãƒˆ
ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›ã—ãŸå¾Œã«ã€ã‚«ãƒ¼ã‚½ãƒ«ãŒæ¥ã‚‹ä½ç½®ã‚’ `$|$` ã§æ±ºã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```yml
  - trigger: ";div"
    replace: <div>$|$</div>
```


## ä¸€ã¤ã®ãƒˆãƒªã‚¬ãƒ¼ã«è¤‡æ•°ã®å¤‰æ›

```yml
  - trigger: ";quote"
    replace: "Every moment is a fresh beginning."
  - trigger: ";quote"
    replace: "Everything you can imagine is real."
  - trigger: ";quote"
    replace: "Whatever you do, do it well."
```

## è¤‡æ•°ã®ãƒˆãƒªã‚¬ãƒ¼ã«ä¸€ã¤ã®å¤‰æ›
```yml
  - triggers: [";hello", ";hi"]
    replace: "world"
```

## è¤‡æ•°ã®ãƒˆãƒªã‚¬ãƒ¼ã«è¤‡æ•°ã®å¤‰æ›
```yml
  - triggers: [";ok",";emoji"]
    replace: "ğŸ‘"
  - triggers: [";ok",";emoji"]
    replace: "âœ…"
  - triggers: [";up",";emoji"]
    replace: "â¬†ï¸"
  - triggers: [";down",";emoji"]
    replace: "â¬‡ï¸"
```

## ç”»åƒã®ãƒãƒƒãƒ

```yml
  - trigger: ";cat"
    image_path: "$CONFIG/images/cat.png"
```


## ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
`match` ã«å…±é€šã—ã¦ã‚ˆãä½¿ã†å¤‰æ•°ãŒã‚ã‚‹å ´åˆã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦è¨­å®šã™ã‚‹ã¨ã€å¤‰æ›´ã™ã‚‹éš›ã«ä¾¿åˆ©ã§ã™ã€‚

```yml
global_vars:
  - name: myname
    type: echo
    params:
      echo: "John"
# It can also be defined as follows:
#  - name: myname
#    type: shell
#    params:
#      cmd: "echo John"

matches:
  - trigger: ";greet"
    replace: "Hello {{myname}}"

  - trigger: ";sig"
    replace: "Best regards, {{myname}}"
```


espanso ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ GitHub ãªã©ã§ç®¡ç†ã—ãŸã„ãŒã€ä¸€éƒ¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªæƒ…å ±ã‚’å«ã‚€ã‚ˆã†ãªå ´åˆã¯ã€ãã‚Œã‚’`params.yml` ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦å…¥ã‚Œã¦ãŠãã€`params.yml` ã‚’ `.gitignore` ã«è¿½åŠ ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚`match` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ `*.yml` ãƒ•ã‚¡ã‚¤ãƒ«ã¯å…¨ã¦èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ç›´æ¥ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ import ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚


```sh
espanso/
â”œâ”€â”€ config/
â”‚Â Â  â””â”€â”€ default.yml
â””â”€â”€ match/
 Â Â  â”œâ”€â”€ base.yml
 Â Â  â”œâ”€â”€ params.yml
    ...
```


```yml[title=params.yml]
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ .gitignore ã«è¿½åŠ ã—ã¦ãŠãã¨å®‰å…¨ã§ã™
global_vars:
  - name: MY_API
    type: echo
    params:
      echo: "EmitDqIhb7Rzu5GheVtiwL452..."
```

```yml[title=base.yml]
# YML file outside of espanso/match/
imports:
  - "paths/to/your.yml"

matches:
  - trigger: ";myapi"
    replace: "{{MY_API}}"
```


## Clipboard Extension
å¤‰æ›å¾Œã®ä¸­èº«ã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®å†…å®¹ã‚’å«ã‚ã¦å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã§ã€è²¼ã‚Šä»˜ã‘ä½œæ¥­ãŒå¿…è¦ãªããªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ç›´å‰ã«ã‚³ãƒ”ãƒ¼ã—ãŸãƒªãƒ³ã‚¯ã‚’ç”¨ã„ã¦ã€HTML ã® `<a>` ã‚¿ã‚°ã‚’ä½œæˆã—ãŸã„æ™‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒˆãƒªã‚¬ãƒ¼ã‚’å®šç¾©ã—ã¾ã™ã€‚
```yml
  - trigger: ";aref"
    replace: "<a href='{{clip}}' />$|$</a>"
    vars:
      - name: "clip"
        type: "clipboard"
```

ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ãƒˆãƒªã‚¬ãƒ¼ä¾‹ï¼š
```yml
  - trigger: ";mdlink"
    replace: "[$|$]({{clip}})"
    vars:
      - name: "clip"
        type: "clipboard"

  - trigger: ";mdcode"
    replace: |
          ```
          {{clip}}
          ```
    vars:
      - name: "clip"
        type: "clipboard"
```

:::tip
å„ãƒˆãƒªã‚¬ãƒ¼ã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã®ãŒé¢å€’ãªæ–¹ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `global_vars` ã«å®šç¾©ã—ã¦ãŠãã¨è‰¯ã„ã§ã™ã€‚
```yml
global_vars:
  - name: "clip"
    type: "clipboard"

matches:
  - trigger: ";mdlink"
    replace: "[$|$]({{clip}})"
```
:::


## Shell Exntension
ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€ãã®çµæœã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```yml
  - trigger: ";shell"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "echo 'Hello from your shell'"
```

ä»¥ä¸‹ã®ä¾‹ã¯ã€ipify ã‹ã‚‰ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IP ã‚’å–å¾—ã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ã§ã™ã€‚
```yml
  - trigger: ";ip"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "curl 'https://api.ipify.org'"
```

ä»¥ä¸‹ã®ä¾‹ã¯ã€UUIDï¼ˆUniversally Unique Identifierï¼‰ã‚’ç”Ÿæˆã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ã§ã™ã€‚
```yml
  - trigger: ";uuid"
    replace: "{{output}}"
    vars:
    - name: output
      type: shell
      params:
        # macOS,Linux:
        cmd: "uuidgen"
        # Windows (requires PowerShell):
        # cmd: "powershell -command \"[guid]::NewGuid().ToString()\""
```

ä»¥ä¸‹ã®è¤‡æ•°ã®ä¾‹ã¯ã€æœ¬æ¥ã®ã‚¢ãƒ—ãƒªã®è¶£æ—¨ã¨ã¯ç•°ãªã‚Šã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã‚„Webã‚µã‚¤ãƒˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ããŸã‚ã®ãƒˆãƒªã‚¬ãƒ¼ã§ã™ã€‚

ã¾ãšã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚„ç‰¹å®šã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ããƒˆãƒªã‚¬ãƒ¼ã€‚
```yml
  - trigger: ";term"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "open -a Terminal.app"

  - trigger: ";dotfile"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "open ~/github/dotfiles/"
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’çµŒç”±ã—ã€VScode ã§ `espanso` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ããƒˆãƒªã‚¬ãƒ¼ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãŒé–‹ãã€`code ~/github/dotfiles/espanso/` ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚`\n` ãŒã‚¨ãƒ³ã‚¿ãƒ¼ã®å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚
```yml
  - trigger: ";espanso"
    replace: "{{output}}\n"
    vars:
      - name: output
        type: shell
        params:
          cmd: "open -a Terminal.app; echo 'code ~/github/dotfiles/espanso/'"
```

:::warning
ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ç›´æ¥å‘¼ã³å‡ºã™æ›¸ãæ–¹ã‚‚ã§ãã¾ã™ãŒã€æœ€åˆã«é–‹ã‹ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€éƒ¨ãŒæ¶ˆã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
```yml
  - trigger: ";espanso"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "code ~/github/dotfiles/espanso/"
```
:::


æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€é–‹ããƒˆãƒªã‚¬ãƒ¼ã€‚
```yml
  - trigger: ";newfile"
    replace: "{{output}}"
    vars:
      - name: uuid
        type: shell
        params:
          cmd: "uuidgen"
      - name: output
        type: shell
        params:
          cmd: "cd ~/Desktop; touch {{uuid}}.md; open /Applications/CotEditor.app {{uuid}}.md"
```


Youtube ã‚’é–‹ããƒˆãƒªã‚¬ãƒ¼ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¾ã™ã€‚
```yml
  - trigger: ";you"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "open 'https://www.youtube.com/'"
```


ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ãŸå†…å®¹ã‚’ Google ã§æ¤œç´¢ã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ã€‚
```yml
  - trigger: ";ggl"
    replace: "{{output}}"
    vars:
      - name: "clip"
        type: "clipboard"
      - name: output
        type: shell
        params:
          cmd: "open 'https://www.google.com/search?q={{clip}}'"
```


VScode ã® `settings.json` ã®è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒˆãƒªã‚¬ãƒ¼ã€‚ä»¥ä¸‹ã®å ´åˆã¯ã€`latex-workshop` ã¨ã„ã†æ‹¡å¼µæ©Ÿèƒ½ã® PDF Viewer ã®è‰²ã®åè»¢ã«é–¢ã™ã‚‹è¨­å®šã‚’ã€`"latex-workshop.view.pdf.invert": 0` ã¨ `"latex-workshop.view.pdf.invert": 1` ã®é–“ã§åˆ‡ã‚Šæ›¿ã‚ã‚‹æ§˜ã«ã—ã¦ã„ã¾ã™ã€‚
```yml
  - trigger: ";invert"
    replace: "{{output}}"
    vars:
      - name: path
        type: echo
        params:
          echo: "~/Library/Application\\ Support/Code/User/settings.json"
      - name: output
        type: shell
        params:
          cmd: |
            if grep -q "\"latex-workshop.view.pdf.invert\": 1" {{path}};
            then sed -i '' 's/\"latex-workshop.view.pdf.invert\": 1/\"latex-workshop.view.pdf.invert\": 0/' {{path}};
            elif grep -q "\"latex-workshop.view.pdf.invert\": 0" {{path}};
            then sed -i '' 's/\"latex-workshop.view.pdf.invert\": 0/\"latex-workshop.view.pdf.invert\": 1/' {{path}};
            else echo "No matching pattern found.";
            fi
```


ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ãŸãƒªãƒ³ã‚¯ã®ã‚µã‚¤ãƒˆã‚’ API ã«ã‚ˆã£ã¦ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã«å¤‰æ›ã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ã€‚ï¼ˆå…¨ã¦ã®ã‚µã‚¤ãƒˆã«å¯¾å¿œã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰
```yml
  - trigger: ";tomd"
    replace: |
            - Webpage to Markdown Conversion by https://urltomarkdown.herokuapp.com/
            - Source URL: {{clipboard}}
            - Conversion Timestamp: {{now}}
            
            ===================================================
            
            {{output}}
    vars:
      - name: output
        type: shell
        params:
          cmd: |
            curl "https://urltomarkdown.herokuapp.com/?url={{clipboard}}"
```


æ¬¡ã®ãƒˆãƒªã‚¬ãƒ¼ã¯Espansoã®çœŸéª¨é ‚ã§ã™ã€‚ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã€`;jet` ã¨å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã« Google Gemini ã«ã‚ˆã‚‹è‹±èªè¨³ãŒæŒ¿å…¥ã•ã‚Œã¾ã™ã€‚`global_vars` ã« `GEMINI_API_KEY` ã‚’å®šç¾©ã—ãŸä¸Šã§ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€GitHub ãªã©ã§ç®¡ç†ã™ã‚‹å ´åˆã¯å…¬é–‹ã—ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚`GEMINI_API_KEY` ã®å–å¾—ã¯[ã“ã¡ã‚‰ã‹ã‚‰](https://aistudio.google.com/api-keys)
```yml
global_vars:
  - name: GEMINI_API_KEY
    type: echo
    params:
      echo: "EmitDqIhb7Rzu5GheVtiwL452...."

matches:
  - trigger: ";jet"
    replace: "{{translation}}"
    vars:
      - name: "clip"
        type: "clipboard"
      - name: gemini_model
        type: echo
        params:
          echo: "gemini-2.5-flash"
      - name: translation
        type: shell
        params:
          cmd: >
            curl -s \
              "https://generativelanguage.googleapis.com/v1beta/models/{{gemini_model}}:generateContent" \
              -H "x-goog-api-key: {{GEMINI_API_KEY}}" \
              -H 'Content-Type: application/json' \
              -X POST \
              -d '{
                    "contents": [{
                      "parts": [{"text": "Translate the following to English. Provide ONLY the translated text, no explanations or markdown: {{clip}}"}]
                    }]
                  }' \
            | jq -r '.candidates[0].content.parts[0].text | split("\n")[0]'
```

:::note
jq ã‚³ãƒãƒ³ãƒ‰ãŒå¿…è¦ã§ã™: `brew install jq`ã€‚APIã‹ã‚‰ã®JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è§£æã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚
:::

:::warning
ä¸Šã®ãƒˆãƒªã‚¬ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™å ´åˆã¯ã€ä¸Šè¨˜ã®ãƒ¢ãƒ‡ãƒ« `gemini-2.5-flash` ãŒç¾åœ¨ã‚‚ä½¿ç”¨å¯èƒ½ã‹ [Google ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://ai.google.dev/gemini-api/docs/models)ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãƒ¢ãƒ‡ãƒ«åã«å•é¡Œã®ãªã„å ´åˆã¯ã€API ã®å‘¼ã³å‡ºã—æ–¹ãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã„ã‹[ã“ã®ãƒšãƒ¼ã‚¸ã® REST ã¨æ›¸ã‹ã‚ŒãŸéƒ¨åˆ†](https://ai.google.dev/gemini-api/docs/quickstart#rest)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
:::

:::tip
ç·¨é›†æ™‚ç‚¹ã§ã¯ã‚ˆã‚Šå¿œç­”ã®æ—©ã„ãƒ¢ãƒ‡ãƒ« `gemini-2.5-flash-lite` ã‚‚ä½¿ç”¨å¯èƒ½ã§ã™ã€‚
:::

:::tip
æŒ‡ç¤ºï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã‚’å¤‰æ›´ã™ã‚Œã°ã€ç¿»è¨³ã ã‘ã§ãªãã€æ–‡ç« ã®æ ¡æ­£ã€è¦ç´„ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãªã©ã€ã‚ã‚‰ã‚†ã‚‹ç¨®é¡ã®ãƒˆãƒªã‚¬ãƒ¼ã‚’è‡ªä½œã§ãã¾ã™ã€‚
:::


## Script Exntension
å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦ãã®çµæœã‚’å—ã‘å–ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```py[title=/path/to/your/script.py]
print("Hello from python")
```

```yml[title=base.yml]
  - trigger: ";pyscript"
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - python
            - /path/to/your/script.py
```


## Form Extension ï¼ˆå¯¾è©±çš„ãªã‚¹ãƒ‹ãƒšãƒƒãƒˆï¼‰
ãƒˆãƒªã‚¬ãƒ¼ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç”Ÿæˆã—ã€å®šå‹æ–‡ã«ãã£ã¦æ–‡ç« ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```yml
  - trigger: ";greet"
    form: |
      Hey [[name]],
      Happy Birthday!
```

![screenshot.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/0d085e75-b23a-70af-604d-834d64d961d5.png)

ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¾ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
```yml
# The above is equivalent to the following
  - trigger: ";_greet"
    replace: |
        Hey {{form.name}},
        Happy Birthday!
    vars:
      - name: "form"
        type: form
        params:
          layout: |
            Hey [[name]],
            Happy Birthday!
```

:::warning
`variable` ã¨ `form` ã‚’åŒã˜ãƒˆãƒªã‚¬ãƒ¼å†…ã§ä½¿ç”¨ã™ã‚‹ã‚ˆã†ãªè¤‡é›‘ãªå ´åˆã«ã¯ã€ã“ã¡ã‚‰ã®è¨˜æ³•å‡ºãªã„ã¨ä½œå‹•ã—ãªã„ã‚ˆã†ã§ã™ã€‚
:::


### ãƒ¡ãƒ¼ãƒ«ã®å®šå‹æ–‡ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æ–‡ç« ã‚’ä½œæˆ
```yml
matches:
  - trigger: ";reply"
    form: |
        Hi, [[name]]
        
        Thank you for your email and for bringing this to our attention.
        I am sorry that you're disappointed with our product.
        
        [[choices]]

        Looking forward to hearing from you
        
        All the bestï¼Œ
        ABC Support Team
    form_fields:
      choices:
        type: choice
        values:
          - Could you please let me know what specific issues you've encountered?
          - sentence 2
          - sentence 3
          - sentence 4
```

![screenshot.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/adbd6d0e-377d-4072-8148-6904f2580930.png)



### Todo ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ
```yml
  - trigger: ";todo"
    replace: "- Task: {{form1.task}}, Due Date: {{form1.day}} {{form1.time}}"
    vars:
      - name: "days"
        type: shell
        params:
          cmd: "for i in {0..6}; do date -v+${i}d '+%Y/%m/%d'; done"
      - name: "hours"
        type: shell
        params:
          cmd: "for i in {8..20}; do echo \"$i:00\"; done"
      - name: "form1"
        type: form
        params:
          layout: "Task: [[task]], Due Date: [[day]] [[time]]"
          fields:
            day:
              type: choice
              values: "{{days}}"
            time:
              type: choice
              values: "{{hours}}"
```

![SCR-20240618-qyki.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/414636/932694e0-8a4f-5c6d-8f57-d7bb38eca3de.png)


### ãƒ†ã‚­ã‚¹ãƒˆã®ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›
ãƒ•ã‚©ãƒ¼ãƒ ã¨ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’çµ„ã¿åˆã‚ã›ãŸå¼·åŠ›ãªä¾‹ã§ã™ã€‚ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã€ãƒ•ã‚©ãƒ¼ãƒ ã§é¸æŠã—ãŸå½¢å¼ï¼ˆã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã€ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ãªã©ï¼‰ã«å¤‰æ›ã—ã¾ã™ã€‚
```yml
  - trigger: ";case"
    replace: "{{output}}"
    vars:
      - name: form
        type: form
        params:
          layout: "Convert clipboard to: [[style]]"
          fields:
            style:
              type: choice
              values: ["UPPERCASE", "lowercase", "PascalCase", "camelCase", "Title Case", "kebab-case", "snake_case"]
      - name: output
        type: shell
        params:
          cmd: |
            text="{{clipboard}}"
            case "{{form.style}}" in
              "UPPERCASE")  echo "$text" | tr '[:lower:]' '[:upper:]';;
              "lowercase")  echo "$text" | tr '[:upper:]' '[:lower:]';;
              "PascalCase") echo "$text" | awk '{for(i=1;i<=NF;i++) $i=toupper(substr($i,1,1)) tolower(substr($i,2));}1' | tr -d ' ';;
              "camelCase")  echo "$text" | awk '{out=tolower($1); for(i=2;i<=NF;i++){out=out toupper(substr($i,1,1)) tolower(substr($i,2))}; print out}';;
              "Title Case") echo "$text" | awk '{for(i=1;i<=NF;i++) $i=toupper(substr($i,1,1)) tolower(substr($i,2));}1';;
              "kebab-case") echo "$text" | sed -E 's/[^a-zA-Z0-9 ]+//g' | tr '[:upper:]' '[:lower:]' | tr -s ' ' '-';;
              "snake_case") echo "$text" | sed -E 's/[^a-zA-Z0-9 ]+//g' | tr '[:upper:]' '[:lower:]' | tr -s ' ' '_';;
            esac
```


### é€šè²¨å¤‰æ›
```yml
  - trigger: ";currency"
    replace: "{{conversion}}"
    vars:
      - name: form
        type: form
        params:
          layout: |
                  Amount: [[amount]]
                  From: [[from]]
                  To: [[to]]
          fields:
            from:
              type: choice
              values: ["USD", "JPY", "CHF", "EUR", "GBP", "CNY", "KRW", "CAD", "AUD"]
            to:
              type: choice
              values: ["JPY", "USD", "EUR", "CHF", "GBP", "CNY", "KRW", "CAD", "AUD"]
      - name: conversion
        type: shell
        params:
          cmd: "curl -s 'https://api.exchangerate-api.com/v4/latest/{{form.from}}' | jq -r '.rates.{{form.to}} * {{form.amount}} | round * 100 / 100' | xargs printf '{{form.amount}} {{form.from}} = %.2f {{form.to}}\\n'"
```



## ã¾ã¨ã‚
Espansoã¯ã€å˜ç´”ãªãƒ†ã‚­ã‚¹ãƒˆç½®æ›ãƒ„ãƒ¼ãƒ«ã«ç•™ã¾ã‚‰ãšã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€å¤–éƒ¨APIã€å¯¾è©±ãƒ•ã‚©ãƒ¼ãƒ ã‚’é§†ä½¿ã™ã‚‹ã“ã¨ã§ã€æ—¥ã€…ã®PCä½œæ¥­ã‚’åŠ‡çš„ã«åŠ¹ç‡åŒ–ã™ã‚‹å¼·åŠ›ãªãƒ‘ãƒ¼ã‚½ãƒŠãƒ«è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

ã“ã®è¨˜äº‹ã§ç´¹ä»‹ã—ãŸä¾‹ã¯ã»ã‚“ã®ä¸€éƒ¨ã§ã™ã€‚ãœã²ã‚ãªãŸè‡ªèº«ã®å®šå‹æ¥­å‹™ã‚„é¢å€’ãªä½œæ¥­ã‚’è¦‹ã¤ã‘å‡ºã—ã€Espansoã§è‡ªå‹•åŒ–ã—ã¦ã¿ã¦ãã ã•ã„ã€‚


## å‚è€ƒãƒªãƒ³ã‚¯
ã“ã“ã§ã¯æ›¸ããã‚Œãªã‹ã£ãŸãƒˆãƒªã‚¬ãƒ¼ã®ä¾‹ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™ã€‚
:::linkcard
https://github.com/kkensuke/espanso/tree/main/match
:::

ã‚ã‚‹ã„ã¯ã€æ¬¡ã®ã‚µã‚¤ãƒˆã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã€‚
:::linkcard
https://ee.qqv.com.au/usage/cookbook/
:::

ã¾ãŸã€Espanso Hubã§ã¯ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç°¡å˜ã«è¿½åŠ ã§ãã¾ã™ã€‚

